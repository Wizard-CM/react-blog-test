import{j as e,r as l,s as y,L as S,p as A,u as P,i as B,m as D,a as E,b as U,C as M,B as O}from"./index-CW2sj8PF.js";import{m as C,L as R}from"./data-CucToi-4.js";import{u as H}from"./index.esm-C3Vsz0gO.js";const m=({children:r})=>e.jsx("h3",{className:"text-xl font-light font-serif",children:r}),v=({post:r,newdate:t,index:o})=>{const[c,h]=l.useState(!1),[u,f]=l.useState("opacity-[0]"),d=y.getFilePreview(r==null?void 0:r.featuredImage);return l.useEffect(()=>{const i=new Image;i.onload=()=>{h(!0),f("opacity-[1]")},i.src=d},[]),e.jsx(S,{to:`/post/${r.$id}`,children:e.jsxs("div",{className:"flex items-center border-b-[1px] border-gray-300 py-1",children:[e.jsxs("div",{className:"left w-full",children:[e.jsxs("div",{className:"flex gap-3 font-mono",children:[e.jsx("p",{className:"text-[0.7rem] capitalize",children:r.userName}),e.jsxs("p",{className:"text-[0.7rem]",children:[C[t==null?void 0:t.getMonth()]," ",t==null?void 0:t.getDate(),",",t==null?void 0:t.getFullYear()]})]}),e.jsx("h3",{className:"mt-1 font-semibold capitalize",children:r==null?void 0:r.title}),e.jsx("span",{className:"font-[0.6rem] mb-2 text-[0.8rem] text-gray-700",children:A(r.content)}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"my-2 px-2 bg-[#F0F0F0] border-[1px] text-[0.9rem] font-serif rounded-lg capitalize text-blue-600",children:r.category}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{}),e.jsx("p",{className:" px-1  text-[0.7rem]  font-bold",children:r==null?void 0:r.likes})]})]})]}),e.jsx("div",{className:"right",children:e.jsxs("div",{className:"relative w-44 h-28",children:[e.jsx("img",{src:d,className:`absolute top-0 left-0 ${c&&"z-[11]"} w-full h-full shadow-sm object-cover transition-all duration-300 ease-in-out ${u}`,alt:"",loading:o<4?"eager":"lazy"}),e.jsx(P,{hash:(r==null?void 0:r.blurHash)||"LMB3vf%2IBIU~qozIUM{%fR*RjWB",width:"100%",height:"100%",resolutionX:32,resolutionY:32,punch:1,className:"absolute top-0 left-0 z-10"})]})})]})})},Y=({children:r})=>e.jsx("button",{className:" text-blue-600 px-2 bg-[#F0F0F0] border-[1px] font-serif rounded-lg capitalize",children:r}),x=["All"],_=()=>{const[r,t]=l.useState([]),[o,c]=l.useState([]),[h,u]=l.useState(!0),[f,d]=l.useState("All"),[i,F]=l.useState(r),[w,g]=l.useState(!0),[b,L]=l.useState(""),[N,$]=l.useState(4);l.useRef(null),B(),D();const j=E(s=>s.post.posts),{register:T,handleSubmit:q,setValue:k,watch:z,formState:{errors:G}}=H();Array.prototype.handleSearcFilter=()=>{const s=new RegExp(`^${b}`,"i");return i.filter(a=>s.test(a))};function I(){g(!1)}function p(s){d(s);const a=r.filter(n=>n.category.toLocaleUpperCase()==s.toLocaleUpperCase());s!="All"?c(a):c(r)}return l.useEffect(()=>{j.map(s=>{x.find(n=>n.toLocaleUpperCase()==s.category.toLocaleUpperCase())||x.push(s.category)}),t(j),F(x),c(j),u(!1)},[]),l.useEffect(()=>{},[]),h?e.jsx(U,{}):e.jsx("div",{className:"w-full",children:e.jsx(M,{children:e.jsxs("div",{className:"parent flex gap-5 flex-col-reverse md:flex-row py-2",children:[e.jsx("div",{className:"home-left w-full md:w-[20%] relative",children:e.jsxs("div",{className:"w-[280px] my-4  p-4 rounded-lg absolute top-0 left-0",children:[e.jsx(m,{children:"Filtering Section"}),e.jsx("form",{onSubmit:I,className:"filter-form",children:e.jsx("input",{type:"text",placeholder:"Search Articles...",className:"searchInput border-[1px] border-black rounded-sm",value:b,onClick:()=>{g(!0),console.log("Clicked")},onChange:s=>{L(s.target.value)}})}),e.jsx("div",{className:`filtered-search-results shadow-xl rounded-lg bg-white z-[2] 
                  ${w?"block":"hidden"}`,children:e.jsx("ul",{className:"search-filter-ul",children:i.handleSearcFilter().map(s=>e.jsx("li",{className:" hover:bg-gray-700 capitalize hover:text-white px-4 py-2",onClick:()=>{k("search",s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()),g(!1),p(z("search"))},children:s},s))})})]})}),e.jsxs("div",{className:"home-mid w-full md:w-[55%] min-h-96  md:border-r-[2px] md:border-l-[2px] border-gray-100 py-0 px-5 ",children:[e.jsx("div",{className:"w-full border-b-[1px] mb-3 border-gray-900 uppercase",children:e.jsx(m,{children:f})}),o.length>0?o.slice(0,N).map((s,a)=>{const n=new Date(s==null?void 0:s.$createdAt);return e.jsx(v,{index:a,newdate:n,post:s},s.$id)}):r.slice(0,N).map(s=>{const a=new Date(s==null?void 0:s.$createdAt);return e.jsx(v,{newdate:a,post:s},s.$id)}),r.length==0&&e.jsx("h2",{className:"text-3xl w-full font-semibold text-center",children:"No Posts To Show"}),e.jsx("div",{className:"mt-5",children:e.jsx(O,{bgColor:"",textColor:"text-black",className:"border-[1px] border-black",onClick:()=>{$(s=>s+4)},children:"LoadMore"})})]}),e.jsxs("div",{className:"home-right w-full md:w-[20%]  ",children:[e.jsxs("div",{className:"top",children:[e.jsx("div",{className:"my-3",children:e.jsx(m,{children:"Choose Category"})}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:x.map((s,a)=>e.jsx("span",{onClick:()=>{p(s)},children:e.jsx(Y,{children:s})},a))})]}),e.jsxs("div",{className:"hidden md:block bottom",children:[e.jsx("div",{className:"my-3",children:e.jsx(m,{children:"Trending"})}),r.slice(3).map(s=>{const a=new Date(s==null?void 0:s.$createdAt);return e.jsx(S,{to:`/post/${s.$id}`,className:"",children:e.jsxs("div",{className:"flex gap-3 items-center border-b-[1px] border-gray-300 py-3",children:[e.jsx("div",{className:"left",children:e.jsx("img",{src:y.getFilePreview(s==null?void 0:s.featuredImage),className:"w-24 h-16 shadow-sm object-cover",alt:"",loading:"lazy"})}),e.jsxs("div",{className:"right w-full",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("p",{className:"text-[0.7rem] font-mono capitalize",children:s.userName}),e.jsxs("p",{className:"text-[0.7rem]",children:[C[a==null?void 0:a.getMonth()]," ",a==null?void 0:a.getDate(),",",a==null?void 0:a.getFullYear()]})]}),e.jsx("h3",{className:"mt-2 font-semibold text-[0.8rem] capitalize",children:s==null?void 0:s.title})]})]})},s.$id)})]})]})]})})})};export{_ as default};
